"use strict";function _createForOfIteratorHelper(e,t){var a="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!a){if(Array.isArray(e)||(a=_unsupportedIterableToArray(e))||t&&e&&"number"==typeof e.length){a&&(e=a);var s=0,l=function(){};return{s:l,n:function(){return s>=e.length?{done:!0}:{done:!1,value:e[s++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var n,d=!0,o=!1;return{s:function(){a=a.call(e)},n:function(){var e=a.next();return d=e.done,e},e:function(e){o=!0,n=e},f:function(){try{d||null==a.return||a.return()}finally{if(o)throw n}}}}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);return"Object"===a&&e.constructor&&(a=e.constructor.name),"Map"===a||"Set"===a?Array.from(e):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,s=new Array(t);a<t;a++)s[a]=e[a];return s}var db,restrictAccess=function(){if("index.html"!==location.href)if(localStorage.adminData){var e=localStorage.getItem("adminData");"started"!==JSON.parse(e).session&&(location.href="index.html")}else location.href="index.html"},salesRecordsSumary=[],debtorRecordsSumary=[],salesPeriodsRecordsSumary=[],debtorsRecordsSumary=[],allSalesDatasets=[],keyToUpdate=0,salesPeriodResponse={},IDB=indexedDB,request=IDB.open("allData",1);request.onsuccess=function(){db=request.result,readSaleData(),readSalesPeriodData(),readDebtorData()},request.onupgradeneeded=function(){(db=request.result).createObjectStore("salesRecords",{autoIncrement:!0}),db.createObjectStore("salesPeriodsRecords",{autoIncrement:!0}),db.createObjectStore("debtorsRecords",{autoIncrement:!0})},request.onerror=function(e){console.log("Error",e)};var div__AddAmountDebtor,addSaleData=function(e){db.transaction(["salesRecords"],"readwrite").objectStore("salesRecords").add(e).onsuccess=function(){readSaleData()}},getSaleData=function(){var e=db.transaction(["salesRecords"],"readwrite").objectStore("salesRecords").get(keyToUpdate);e.onsuccess=function(){salesNumberInput.value=e.result.saleAmount,salesDateInput.value=e.result.saleDate}},updateSaleData=function(e){db.transaction(["salesRecords"],"readwrite").objectStore("salesRecords").put(e,keyToUpdate).onsuccess=function(){readSaleData()}},deleteSaleData=function(){db.transaction(["salesRecords"],"readwrite").objectStore("salesRecords").delete(keyToUpdate).onsuccess=function(){readSaleData()}},readSaleData=function(){var e=db.transaction(["salesRecords"],"readonly").objectStore("salesRecords").openCursor(),t=document.createDocumentFragment();salesRecordsSumary=[],e.onsuccess=function(e){var a=e.target.result;a?(salesRecordsSumary.push(new SalesObject(a.value.saleAmount,a.value.saleDate)),t.prepend(createSaleRow(a)),a.continue()):salesTable?(salesTable.textContent="",salesTable.appendChild(t),allSalesDatasets=Array.from(document.querySelectorAll("[data-data-sales-inf]")),checkTableContent(salesTable),setSalesData(salesRecordsSumary),loadSalesPage.style.display="none"):recentSalesBox?(setSalesData(salesRecordsSumary),loadSalesPage.style.display="none"):salesPeriodTable&&setSalesData(salesRecordsSumary)}},setSalesData=function(e){mySalesChart&&(mySalesChart.config._config.data.datasets[0].data=[],mySalesChart.config._config.data.labels=[]);var t=document.createDocumentFragment(),a=0,s=0;if(0!==e.length){h2DashboardInf&&(h2DashboardInf.innerHTML='There is no accounts receivable information to display. You can start by adding a <a href="accounts-receivable.html" style="color: #FFAC30"> account receivable </a>');var l,n=_createForOfIteratorHelper(e);try{for(n.s();!(l=n.n()).done;){var d=l.value;a+=parseFloat(d.sale.replace(/,/g,"")),s++,salesTable&&mySalesChart?s>e.length-20&&(mySalesChart.config._config.data.datasets[0].data.push(d.sale.replace(/,/g,"")),mySalesChart.config._config.data.labels.push(d.date)):mySalesChart&&(s>e.length-10&&(mySalesChart.config._config.data.datasets[0].data.push(d.sale.replace(/,/g,"")),mySalesChart.config._config.data.labels.push(d.date)),s>e.length-5&&t.prepend(createRecentSaleRow(d)))}}catch(e){n.e(e)}finally{n.f()}a=new Intl.NumberFormat("en-US").format(a),(salesTable||salesPeriodTable||recentSalesTable)&&(cardTotalSales.textContent="$".concat(a)),salesTable&&(totalSalesTD.textContent="$".concat(a),todaysDateTD.textContent=reverseDateFormat(getDate()),salesPeriodResponse={salesPeriodAmount:a,salesPeriodDate:reverseDateFormat(getDate())}),recentSalesTable&&recentSalesTable.appendChild(t)}else recentSalesBox&&(recentSalesBox.style.display="none",recentSalesBox.previousElementSibling.style.display="none")},reverseDateFormat=function(e){return e.split("-").reverse().join("-")},createRecentSaleRow=function(e){var t=document.createElement("TR"),a=document.createElement("TD");a.innerHTML='<ion-icon name="pricetags-outline" class="tr-icon tr-icon--sales"></ion-icon> $'.concat(e.sale),t.appendChild(a);var s=document.createElement("TD");return s.textContent=reverseDateFormat(e.date),t.appendChild(s),t},createSaleRow=function(e){var t=document.createElement("TR");t.dataset.dataSalesInf="".concat(e.value.saleAmount," ").concat(reverseDateFormat(e.value.saleDate));var a=document.createElement("TD");t.appendChild(a);var s=document.createElement("INPUT");s.setAttribute("type","checkbox"),s.dataset.id=e.key,s.classList.add("salesCheckbox"),a.appendChild(s);var l=document.createElement("TD");l.textContent="$".concat(e.value.saleAmount),t.appendChild(l);var n=document.createElement("TD");n.classList.add("td-lighter-font"),n.textContent=reverseDateFormat(e.value.saleDate),t.appendChild(n);var d=document.createElement("TD");t.appendChild(d);var o=document.createElement("BUTTON");o.dataset.id=e.key,o.classList.add("td-button"),o.classList.add("td-button--edit"),o.classList.add("saleBtn"),o.classList.add("editSaleBtn"),o.textContent="Edit",d.appendChild(o);var r=document.createElement("ION-ICON");r.setAttribute("name","pencil-sharp"),r.dataset.id=e.key,r.classList.add("editSaleBtn"),o.appendChild(r);var c=document.createElement("BUTTON");c.dataset.id=e.key,c.classList.add("td-button"),c.classList.add("td-button--delete"),c.classList.add("saleBtn"),c.classList.add("deleteSaleBtn"),c.textContent="Delete",d.appendChild(c);var i=document.createElement("ION-ICON");return i.setAttribute("name","trash-outline"),i.dataset.id=e.key,i.classList.add("deleteSaleBtn"),c.appendChild(i),t},addSalesPeriodData=function(e){db.transaction(["salesPeriodsRecords"],"readwrite").objectStore("salesPeriodsRecords").add(e).onsuccess=function(){readSalesPeriodData(),selectorOfAllSalesChecks.checked=!0,selectAllSalesChecks(),deleteAllSaleBtn.click(),modalDeleteSaleBtn.click(),confirmationModal.children[1].textContent="A new sales period has been added successfully.",confirmationModal.children[2].style.display="block",confirmationModal.classList.add("display"),setTimeout((function(){confirmationModal.classList.remove("display"),confirmationModal.children[2].style.display="none"}),4e3)}},deleteSalesPeriodData=function(){db.transaction(["salesPeriodsRecords"],"readwrite").objectStore("salesPeriodsRecords").delete(keyToUpdate).onsuccess=function(){readSalesPeriodData()}},readSalesPeriodData=function(){var e=db.transaction(["salesPeriodsRecords"],"readonly").objectStore("salesPeriodsRecords").openCursor(),t=document.createDocumentFragment();salesPeriodsRecordsSumary=[],e.onsuccess=function(e){var a=e.target.result;a?(salesPeriodsRecordsSumary.push(new SalesPeriodsObject(a.value.salesPeriodAmount,a.value.salesPeriodDate)),t.prepend(createSalesPeriodRow(a)),a.continue()):salesPeriodTable?(salesPeriodTable.textContent="",salesPeriodTable.appendChild(t),allSalesDatasets=Array.from(document.querySelectorAll("[data-data-sales-period-inf]")),checkTableContent(salesPeriodTable),loadSalesPage.style.display="none",setSalesPeriodData(salesPeriodsRecordsSumary)):(recentSalesBox||salesTable)&&setSalesPeriodData(salesPeriodsRecordsSumary)}},setSalesPeriodData=function(e){mySalesPerPeriodChart&&(mySalesPerPeriodChart.config._config.data.datasets[0].data=[],mySalesPerPeriodChart.config._config.data.labels=[]);var t=0;if(0!==e.length){var a,s=_createForOfIteratorHelper(e);try{for(s.s();!(a=s.n()).done;){var l=a.value;++t>e.length-5&&salesPeriodTable&&(mySalesPerPeriodChart.config._config.data.datasets[0].data.push(l.sale.replace(/,/g,"")),mySalesPerPeriodChart.config._config.data.labels.push(l.date))}}catch(e){s.e(e)}finally{s.f()}t=new Intl.NumberFormat("en-US").format(t),(salesTable||salesPeriodTable||recentSalesTable)&&(cardTotalSalesPeriods.textContent=t)}},createSalesPeriodRow=function(e){var t=document.createElement("TR");t.dataset.dataSalesPeriodInf="".concat(e.value.salesPeriodAmount," ").concat(e.value.salesPeriodDate);var a=document.createElement("TD");t.appendChild(a);var s=document.createElement("INPUT");s.setAttribute("type","checkbox"),s.dataset.id=e.key,s.classList.add("salesCheckbox"),a.appendChild(s);var l=document.createElement("TD");l.textContent="$".concat(e.value.salesPeriodAmount),t.appendChild(l);var n=document.createElement("TD");n.classList.add("td-lighter-font"),n.textContent=e.value.salesPeriodDate,t.appendChild(n);var d=document.createElement("TD");t.appendChild(d);var o=document.createElement("BUTTON");o.dataset.id=e.key,o.classList.add("td-button"),o.classList.add("td-button--delete"),o.classList.add("saleBtn"),o.classList.add("deleteSaleBtn"),o.textContent="Delete",d.appendChild(o);var r=document.createElement("ION-ICON");return r.setAttribute("name","trash-outline"),r.dataset.id=e.key,r.classList.add("deleteSaleBtn"),o.appendChild(r),t},addDebtorData=function(e){db.transaction(["debtorsRecords"],"readwrite").objectStore("debtorsRecords").add(e).onsuccess=function(){readDebtorData()}},getDebtorData=function(){var e=db.transaction(["debtorsRecords"],"readwrite").objectStore("debtorsRecords").get(keyToUpdate);e.onsuccess=function(){debtorsNameInput.value=e.result.debtorName,salesNumberInput.value=e.result.debtorAmounts,debtorPhoneInput.value=e.result.debtorPhone,debtorAddressInput.value=e.result.debtorAddress}},updateDebtorData=function(e){db.transaction(["debtorsRecords"],"readwrite").objectStore("debtorsRecords").put(e,keyToUpdate).onsuccess=function(){readDebtorData()}},deleteDebtorData=function(){db.transaction(["debtorsRecords"],"readwrite").objectStore("debtorsRecords").delete(keyToUpdate).onsuccess=function(){readDebtorData()}},readDebtorData=function(){var e=db.transaction(["debtorsRecords"],"readonly").objectStore("debtorsRecords").openCursor(),t=document.createDocumentFragment();debtorsRecordsSumary=[],e.onsuccess=function(e){var a=e.target.result;a?(debtorsRecordsSumary.push(new DebtorObject(a.value.debtorName,a.value.debtorAmounts,a.value.debtorPhone,a.value.debtorAddress)),t.prepend(createDetailsDebtorRow(a)),t.prepend(createDebtorRow(a)),a.continue()):debtorsTable?(debtorsTable.textContent="",debtorsTable.appendChild(t),allSalesDatasets=Array.from(document.querySelectorAll("[data-data-debtor-inf]")),checkTableContent(debtorsTable),loadSalesPage.style.display="none",setDebtorsData(debtorsRecordsSumary)):recentSalesBox&&setDebtorsData(debtorsRecordsSumary)}},setDebtorsData=function(e){myDebtorsChart&&(myDebtorsChart.config._config.data.datasets[0].data=[],myDebtorsChart.config._config.data.labels=[]);var t=document.createDocumentFragment(),a=0,s=0;if(0!==e.length){h2DashboardInf&&0==salesRecordsSumary.length?h2DashboardInf.innerHTML='There is no sales information to display. You can start by adding a <a href="accounts-receivable.html" style="color: #3ABFB0"> sale </a>':h2DashboardInf&&(h2DashboardInf.style.display="none");var l,n=_createForOfIteratorHelper(e);try{for(n.s();!(l=n.n()).done;){var d=l.value,o=d.amount[0].replace(/,/g,"");a+=parseFloat(o),s++,debtorsTable&&myDebtorsChart?s>e.length-10&&(myDebtorsChart.config._config.data.datasets[0].data.push(o),myDebtorsChart.config._config.data.labels.push(d.nam)):myDebtorsChart&&(s>e.length-5&&(myDebtorsChart.config._config.data.datasets[0].data.push(o),myDebtorsChart.config._config.data.labels.push(d.nam)),s>e.length-5&&t.prepend(createRecentDebtorRow(d)))}}catch(e){n.e(e)}finally{n.f()}a=new Intl.NumberFormat("en-US").format(a),(debtorsTable||recentDebtorsTable)&&(cardTotalDebit.textContent="$".concat(a),cardTotalDebtors.textContent="$".concat(e.length)),recentDebtorsTable&&(recentDebtorsTable.textContent="",recentDebtorsTable.appendChild(t))}else recentDebtorBox&&(recentDebtorBox.style.display="none",recentDebtorBox.previousElementSibling.style.display="none")},createRecentDebtorRow=function(e){var t=document.createElement("TR"),a=document.createElement("TD");a.innerHTML='<ion-icon name="person-outline" class="tr-icon tr-icon--debtors"></ion-icon> '.concat(e.nam),t.appendChild(a);var s=document.createElement("TD");return s.textContent=e.amount,t.appendChild(s),t},createDebtorRow=function(e){var t,a=0,s=new Intl.NumberFormat("en-US"),l=_createForOfIteratorHelper(e.value.debtorAmounts);try{for(l.s();!(t=l.n()).done;){var n=t.value.replace(/,/g,"");a+=parseFloat(n)}}catch(e){l.e(e)}finally{l.f()}var d=document.createElement("TR");d.dataset.dataDebtorInf="".concat(e.value.debtorName," ").concat(s.format(a));var o=document.createElement("TD");d.appendChild(o);var r=document.createElement("INPUT");r.setAttribute("type","checkbox"),r.dataset.id=e.key,r.classList.add("salesCheckbox"),o.appendChild(r);var c=document.createElement("TD");c.classList.add("td-align-center"),c.textContent=e.value.debtorName,d.appendChild(c);var i=document.createElement("TD");i.classList.add("td-lighter-font"),i.textContent="$".concat(s.format(a)),d.appendChild(i);var u=document.createElement("TD");d.appendChild(u);var m=document.createElement("BUTTON");m.dataset.id=e.key,m.classList.add("td-button"),m.classList.add("td-button--edit"),m.classList.add("saleBtn"),m.classList.add("editSaleBtn"),m.textContent="Edit",u.appendChild(m);var p=document.createElement("ION-ICON");p.setAttribute("name","pencil-sharp"),p.dataset.id=e.key,p.classList.add("editSaleBtn"),m.appendChild(p);var b=document.createElement("BUTTON");b.dataset.id=e.key,b.classList.add("td-button"),b.classList.add("td-button--create-period"),b.classList.add("saleBtn"),b.classList.add("deleteSaleBtn"),b.textContent="Pay all",b.style.margin="auto",u.appendChild(b);var y=document.createElement("ION-ICON");y.setAttribute("name","person-remove-outline"),y.dataset.id=e.key,y.classList.add("deleteSaleBtn"),b.appendChild(y);var h=document.createElement("ION-ICON");return h.setAttribute("name","chevron-down-outline"),h.classList.add("td-button"),h.classList.add("td-button--display-details"),u.appendChild(h),d},createDetailsDebtorRow=function(e){var t,a=0,s=new Intl.NumberFormat("en-US"),l=_createForOfIteratorHelper(e.value.debtorAmounts);try{for(l.s();!(t=l.n()).done;){var n=t.value.replace(/,/g,"");a+=parseFloat(n)}}catch(e){l.e(e)}finally{l.f()}var d=document.createElement("TR");d.classList.add("tr-details"),d.classList.add("tr-details--hide");var o=document.createElement("TD");d.appendChild(o);var r=document.createElement("INPUT");r.setAttribute("type","checkbox"),r.style.display="none",o.appendChild(r);var c=document.createElement("TD");c.classList.add("tr-details__td"),c.colSpan="3",c.classList.add("td-align-left");var i=document.createElement("SPAN");i.classList.add("tr-details__td__caption");var u=document.createElement("ION-ICON");u.setAttribute("name","information-circle-outline"),i.textContent="Info",i.prepend(u),c.appendChild(i);var m=document.createElement("DIV");if(m.classList.add("tdBox-inf"),""!==e.value.debtorPhone){var p=document.createElement("SPAN");p.textContent="Phone: ".concat(e.value.debtorPhone);var b=document.createElement("ION-ICON");b.setAttribute("name","call-outline"),p.prepend(b),m.appendChild(p)}else{var y=document.createElement("SPAN");y.textContent="Phone: not yet added";var h=document.createElement("ION-ICON");h.setAttribute("name","call-outline"),y.prepend(h),m.appendChild(y)}if(""!==e.value.debtorAddress){var v=document.createElement("SPAN");v.textContent="Address: ".concat(e.value.debtorAddress);var S=document.createElement("ION-ICON");S.setAttribute("name","location-outline"),v.prepend(S),m.appendChild(v)}else{var f=document.createElement("SPAN");f.textContent="Address: not yet added";var g=document.createElement("ION-ICON");g.setAttribute("name","location-outline"),f.prepend(g),m.appendChild(f)}var D=document.createElement("SPAN");D.classList.add("tr-details__td__caption");var I=document.createElement("ION-ICON");I.setAttribute("name","clipboard-outline"),D.textContent="Records",D.prepend(I);var T=document.createElement("DIV");T.classList.add("tr-details__boxTd-records");var A=document.createElement("TABLE");A.classList.add("tr-details__boxTd-records__table"),A.style.display="inline-table";var C=document.createElement("TBODY"),E=document.createElement("TR");e.value.debtorDate.forEach((function(e){var t=document.createElement("TD");t.textContent=e,t.classList.add("tr-details__boxTd-records__table__td1"),E.appendChild(t)})),e.value.debtorAmounts.forEach((function(e){var t=document.createElement("TD");t.textContent="$".concat(e),E.appendChild(t)}));var L=document.createElement("TD");if(L.style.display="none",E.appendChild(L),C.appendChild(E),A.appendChild(C),T.appendChild(A),e.value.debtorAmounts.length>1){var B=document.createElement("TR");B.classList.add("tr-details__boxTd-records__table__trTotal");var x=document.createElement("TD");x.textContent="Total bill",B.appendChild(x);var P=document.createElement("TD");P.textContent="$".concat(s.format(a)),B.appendChild(P);var N=document.createElement("TD");N.style.display="none",B.appendChild(N),C.appendChild(B)}(div__AddAmountDebtor=document.createElement("DIV")).classList.add("tr-details__boxTd-records"),div__AddAmountDebtor.classList.add("tr-details__boxTd-records--add-or-remove");var _=document.createElement("ION-ICON");_.setAttribute("name","remove-outline"),_.setAttribute("ID","removeAmountsBtn"),_.classList.add("tr-details__boxTd-records--add-or-remove__icon"),_.classList.add("tr-details__boxTd-records--add-or-remove__icon--remove"),div__AddAmountDebtor.appendChild(_);var k=document.createElement("INPUT");k.setAttribute("TYPE","TEXT"),k.setAttribute("NAME","addAmountsInput".concat(e.key)),k.setAttribute("ID","addAmountsInput".concat(e.key)),k.setAttribute("PLACEHOLDER","$ 999,999"),k.setAttribute("MAXLENGHT","21"),k.setAttribute("AUTOCOMPLETE","OFF"),k.classList.add("tr-details__boxTd-records--add-or-remove__input"),div__AddAmountDebtor.appendChild(k);var w=document.createElement("ION-ICON");w.setAttribute("name","add-outline"),w.setAttribute("ID","addAmountsBtn"),w.classList.add("tr-details__boxTd-records--add-or-remove__icon"),w.classList.add("tr-details__boxTd-records--add-or-remove__icon--add"),div__AddAmountDebtor.appendChild(w),c.appendChild(m),c.appendChild(D),c.appendChild(T),c.appendChild(div__AddAmountDebtor);var R=document.createElement("TD");return R.style.display="none",d.appendChild(c),d.appendChild(R),d},li1=Array.from(document.querySelectorAll(".ul--1__li")),body=document.querySelector("body"),nav=document.getElementById("nav"),boxOp=document.querySelector(".box-op"),cardTotalSales=document.getElementById("cardTotalSales"),cardTotalSalesPeriods=document.getElementById("cardTotalSalesPeriods"),cardTotalDebit=document.getElementById("cardTotalDebit"),cardTotalDebtors=document.getElementById("cardTotalDebtors"),h2DashboardInf=document.getElementById("h2DashboardInf"),recentSalesBox=document.getElementById("recentSalesBox"),recentSalesTable=document.getElementById("recentSalesTable"),recentDebtorsTable=document.getElementById("recentDebtorsTable"),salesSearch=document.getElementById("salesSearch"),salesTable=document.getElementById("salesTable"),salesPeriodTable=document.getElementById("salesPeriodTable"),debtorsTable=document.getElementById("debtorsTable"),selectorOfAllSalesChecks=document.getElementById("selectorOfAllSalesChecks"),allSalesChecks=Array.from(document.querySelectorAll(".salesCheckbox")),allSalesBtn=Array.from(document.querySelectorAll(".saleBtn")),h2SalesInf=document.getElementById("h2SalesInf"),createPeriodBtn=document.getElementById("createPeriodBtn"),deleteSelectedSaleBtn=document.getElementById("deleteSelectedSaleBtn"),deleteAllSaleBtn=document.getElementById("deleteAllSaleBtn"),inputs__AddAmountDebtor=[];setTimeout((function(){inputs__AddAmountDebtor=document.querySelectorAll(".tr-details__boxTd-records--add-or-remove__input")}),1e3);var addSaleBtn=document.getElementById("addSaleBtn"),salesModalContainer=document.getElementById("salesModalContainer"),modalToAddSales=document.getElementById("modalToAddSales"),forms=document.querySelectorAll(".modal-container__modal__form"),modalSaleTitle=document.getElementById("modalSaleTitle"),salesNumberInput=document.getElementById("salesNumberInput"),salesDateInput=document.getElementById("salesDateInput"),debtorsNameInput=document.getElementById("debtorsNameInput"),debtorPhoneInput=document.getElementById("debtorPhoneInput"),debtorAddressInput=document.getElementById("debtorAddressInput"),modalAddSaleBtn=document.getElementById("modalAddSaleBtn"),modalEditSaleBtn=document.getElementById("modalEditSaleBtn"),modalToDeleteSale=document.getElementById("modalToDeleteSale"),modalDebtorInputs=document.getElementById("modalDebtorInputs"),modalDebtorReturnBtn=document.getElementById("modalDebtorReturnBtn"),modalDebtorInputs2=document.getElementById("modalDebtorInputs2"),warningMsgOfName=document.getElementById("warningMsgOfName"),warningMsgOfPhone=document.getElementById("warningMsgOfPhone"),confirmationModal=document.getElementById("confirmationModal"),modalToCreatePeriod=document.getElementById("modalToCreatePeriod"),totalSalesTD=document.getElementById("totalSalesTD"),todaysDateTD=document.getElementById("todaysDateTD"),refreshSalesChartBtn=document.getElementById("refreshSalesChartBtn"),loadSalesPage=document.getElementById("loadSalesPage"),markLi=function(){location.href.includes("/dashboard.html")?li1[1].classList.add("selected"):location.href.includes("/sales.html")?li1[2].classList.add("selected"):location.href.includes("/sales-per-period.html")?li1[3].classList.add("selected"):location.href.includes("/accounts-receivable.html")&&li1[4].classList.add("selected")},switchToAddSalesModal=function(){modalSaleTitle.textContent="New Sale",modalEditSaleBtn.style.display="none",modalAddSaleBtn.style.display="flex",modalSaleIcon.setAttribute("name","add-circle-outline")},switchToAddDebtorModal=function(){modalSaleTitle.textContent="New Account",modalEditSaleBtn.style.display="none",nextAddDebtorBtn.dataset.modalType="add",modalAddSaleBtn.style.display="flex",modalSaleIcon.setAttribute("name","person-add-outline"),modalSaleIcon.style.color="#FFAC30"},switchToEditSalesModal=function(){modalSaleTitle.textContent="Edit Sale",modalAddSaleBtn.style.display="none",modalEditSaleBtn.style.display="flex",modalSaleIcon.setAttribute("name","pencil-sharp")},switchToEditDebtorModal=function(){modalSaleTitle.textContent="Edit Account",modalAddSaleBtn.style.display="none",modalEditSaleBtn.style.display="flex",nextAddDebtorBtn.dataset.modalType="edit",modalSaleIcon.setAttribute("name","pencil-sharp"),modalSaleIcon.style.color="#FFAC30",modalEditSaleBtn.style.display="none"},displayAddSaleModal=function(){salesModalContainer.classList.add("display"),salesNumberInput.classList.remove("active--right"),modalToAddSales.classList.add("display"),debtorsTable&&(modalAddSaleBtn.style.display="none")},hideAddSaleModal=function(){salesModalContainer.classList.remove("display"),modalToDeleteSale.classList.remove("display"),modalToAddSales.classList.remove("display"),salesTable?(salesDateInput.classList.remove("active--right"),salesDateInput.classList.remove("active--wrong"),modalToCreatePeriod.classList.remove("display")):debtorsTable&&(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.remove("active--wrong"),debtorPhoneInput.classList.remove("active-right"),debtorAddressInput.classList.remove("active-right"),debtorsNameInput.value="",modalDebtorReturnBtn.click()),salesNumberInput.value="",salesNumberInput.classList.remove("active--right"),salesNumberInput.classList.remove("active--wrong")},getDate=function(){var e=new Date,t=e.getDate(),a=e.getMonth()+1,s=e.getFullYear();t<10&&(t="0"+t),a<10&&(a="0"+a);var l="".concat(s,"-").concat(a,"-").concat(t);return salesDateInput&&(salesDateInput.value=l),l},getHour=function(){var e=new Date,t=e.getHours(),a="am";return t>12&&(t-=12,a="pm"),t<10&&(t="0".concat(t)),"".concat(t," : ").concat(e.getMinutes()," ").concat(a)},checkboxsSelectedKeys=[],selectSalesCheck=function(e){allSalesChecks=Array.from(document.querySelectorAll(".salesCheckbox")),allSalesBtn=Array.from(document.querySelectorAll(".saleBtn"));var t=allSalesChecks.filter((function(e){return 1==e.checked}));checkboxsSelectedKeys=[],0!==t.length?(allSalesBtn.map((function(e){return e.classList.add("button--hide")})),selectorOfAllSalesChecks.checked=!1,createPeriodBtn.style.display="none",deleteAllSaleBtn.style.display="none",deleteSelectedSaleBtn.style.display="flex",deleteSelectedSaleBtn.childNodes[0].textContent="Delete ".concat(t.length," Selected"),t.map((function(e){return checkboxsSelectedKeys.push(e.dataset.id)}))):(selectorOfAllSalesChecks.checked=!1,deleteSelectedSaleBtn.style.display="none",deselectAllSalesChecks.style.display="none",createPeriodBtn.style.display="flex",allSalesBtn.map((function(e){return e.classList.remove("button--hide")})))},selectAllSalesChecks=function(){allSalesChecks=Array.from(document.querySelectorAll(".salesCheckbox")),allSalesBtn=Array.from(document.querySelectorAll(".saleBtn")),checkboxsSelectedKeys=[],selectorOfAllSalesChecks.checked?(allSalesChecks.map((function(e){e.checked=!0})),allSalesChecks.map((function(e){return checkboxsSelectedKeys.push(e.dataset.id)})),allSalesBtn.map((function(e){return e.classList.add("button--hide")})),createPeriodBtn.style.display="none",deleteSelectedSaleBtn.style.display="none",deleteAllSaleBtn.style.display="flex"):(allSalesChecks.map((function(e){e.disabled=!1,e.checked=!1})),allSalesBtn.map((function(e){return e.classList.remove("button--hide")})),deleteAllSaleBtn.style.display="none",deleteSelectedSaleBtn.style.display="none",deselectAllSalesChecks.style.display="none",createPeriodBtn.style.display="flex")},addSale=function(){if(deleteAllSaleBtn.style.display="none",deleteSelectedSaleBtn.style.display="none",selectorOfAllSalesChecks.checked=!1,""==salesNumberInput.value||"0"==salesNumberInput.value)salesNumberInput.classList.add("active--wrong");else{if(!salesDateInput.value&&salesTable)return;var e={saleAmount:salesNumberInput.value,saleDate:salesDateInput.value};addSaleData(e),hideAddSaleModal(),confirmationModal.children[1].textContent="A new sale has been added successfully.",confirmationModal.classList.add("display"),setTimeout((function(){confirmationModal.classList.remove("display")}),4e3)}},updateData=function(){if(""==salesNumberInput.value||"0"==salesNumberInput.value)salesNumberInput.classList.add("active--wrong");else{if(!salesDateInput.value)return;var e={saleAmount:salesNumberInput.value,saleDate:salesDateInput.value};updateSaleData(e),hideAddSaleModal(),confirmationModal.children[1].textContent="A sale has been edited successfully.",confirmationModal.classList.add("display"),setTimeout((function(){confirmationModal.classList.remove("display")}),4e3)}},displayDeleteSaleModal=function(){salesModalContainer.classList.add("display"),modalToDeleteSale.classList.add("display")},displayCreatePeriodModal=function(){salesModalContainer.classList.add("display"),modalToCreatePeriod.classList.add("display")},switchNextAddDebtor2=function(){modalDebtorInputs.classList.add("hide"),modalDebtorInputs2.classList.add("show"),modalDebtorReturnBtn.style.display="flex",modalDebtorReturnBtn.previousElementSibling.style.display="none",nextAddDebtorBtn.style.display="none","add"==nextAddDebtorBtn.dataset.modalType?modalAddSaleBtn.style.display="flex":"edit"==nextAddDebtorBtn.dataset.modalType&&(modalEditSaleBtn.style.display="flex")},switchNextAddDebtor1=function(){modalDebtorReturnBtn.style.display="none",modalDebtorReturnBtn.previousElementSibling.style.display="flex","add"==nextAddDebtorBtn.dataset.modalType?modalAddSaleBtn.style.display="none":"edit"==nextAddDebtorBtn.dataset.modalType&&(modalEditSaleBtn.style.display="none"),nextAddDebtorBtn.style.display="flex",modalDebtorInputs.classList.remove("hide"),modalDebtorInputs2.classList.remove("show")},validateInputsDebtor1=function(){var e=debtorsNameInput.value.replace(/\s+/g," ");salesNumberInput.value||e||(salesNumberInput.classList.add("active--wrong"),debtorsNameInput.classList.add("active--wrong")),0==e.length?(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.add("active--wrong"),warningMsgOfName.textContent="You must specify a name for the client."):e.length<3?(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.add("active--wrong"),warningMsgOfName.textContent="Name cannot be less than 3."):e.length>24?(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.add("active--wrong"),warningMsgOfName.textContent="Name cannot be greater than 24."):/^[a-zA-Z 0-9]{3,24}$/.test(debtorsNameInput.value)?salesNumberInput.value&&0!=salesNumberInput.value?(debtorsNameInput.value=e.trim(),switchNextAddDebtor2()):(salesNumberInput.classList.remove("active--right"),salesNumberInput.classList.add("active--wrong")):(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.add("active--wrong"),warningMsgOfName.textContent="The name can only include letters and numbers.",debtorsNameInput.value=e)},addDebtor=function(){if(debtorPhoneInput.value.length>0&&debtorPhoneInput.value.length<16)debtorPhoneInput.classList.remove("active--right"),debtorPhoneInput.classList.add("active--wrong"),warningMsgOfPhone.textContent="You must specify a valid number";else{var e={debtorName:debtorsNameInput.value,debtorAmounts:[salesNumberInput.value],debtorDate:[reverseDateFormat(getDate())+" -- "+getHour()],debtorPhone:debtorPhoneInput.value,debtorAddress:debtorAddressInput.value};addDebtorData(e),hideAddSaleModal(),confirmationModal.children[1].textContent="A new account has been added successfully.",confirmationModal.classList.add("display"),setTimeout((function(){confirmationModal.classList.remove("display")}),4e3)}},updateDebtor=function(){if(debtorPhoneInput.value.length>0&&debtorPhoneInput.value.length<16)debtorPhoneInput.classList.remove("active--right"),debtorPhoneInput.classList.add("active--wrong"),warningMsgOfPhone.textContent="You must specify a valid number";else{var e={debtorName:debtorsNameInput.value,debtorAmounts:[salesNumberInput.value],debtorDate:[reverseDateFormat(getDate())+" -- "+getHour()],debtorPhone:debtorPhoneInput.value,debtorAddress:debtorAddressInput.value};updateDebtorData(e),hideAddSaleModal(),confirmationModal.children[1].textContent="A new account has been edited successfully.",confirmationModal.classList.add("display"),setTimeout((function(){confirmationModal.classList.remove("display")}),4e3)}},displayDebtorDetails=function(e){var t=Array.from(document.querySelectorAll(".td-button--display-details")),a=Array.from(document.querySelectorAll(".tr-details"));e.classList.contains("td-button--display-details--up")?(t.forEach((function(e){return e.classList.remove("td-button--display-details--up")})),a.forEach((function(e){return e.classList.add("tr-details--hide")}))):(t.forEach((function(e){return e.classList.remove("td-button--display-details--up")})),e.classList.add("td-button--display-details--up"),a.forEach((function(e){return e.classList.add("tr-details--hide")})),e.parentElement.parentElement.nextElementSibling.classList.remove("tr-details--hide"))};body.addEventListener("click",(function(e){e.target.classList.contains("menu-icon")?(main.classList.toggle("active"),nav.classList.toggle("active")):e.target.classList.contains("close-icon")?(nav.classList.remove("active"),main.classList.remove("active")):"addSaleBtn"===e.target.id||e.target.classList.contains("addSaleBtn")?(switchToAddSalesModal(),displayAddSaleModal(),getDate()):"addDebtorBtn"===e.target.id||e.target.classList.contains("addDebtorBtn")?(switchToAddDebtorModal(),displayAddSaleModal()):e.target.classList.contains("editSaleBtn")?(salesTable?switchToEditSalesModal():debtorsTable&&switchToEditDebtorModal(),keyToUpdate=parseFloat(e.target.dataset.id),salesTable?getSaleData():debtorsTable&&getDebtorData(),displayAddSaleModal(),getDate()):e.target.classList.contains("close-modal")?hideAddSaleModal():"cleanSalesSearch"===e.target.id?(salesSearch.value="",salesSearch.parentElement.classList.remove("active--right"),searchForSales()):e.target.classList.contains("salesCheckbox")?(deselectAllSalesChecks.style.display="flex",selectSalesCheck()):"selectorOfAllSalesChecks"===e.target.id?(deselectAllSalesChecks.style.display="flex",selectAllSalesChecks()):"deselectAllSalesChecks"===e.target.id||e.target.classList.contains("deselectAllSalesChecks")?(allSalesChecks.forEach((function(e){e.checked=!1})),selectorOfAllSalesChecks.checked=!1,selectAllSalesChecks()):("modalAddSaleBtn"===e.target.id||e.target.classList.contains("modalAddSaleBtn"))&&salesTable?(e.preventDefault(),addSale()):"modalEditSaleBtn"===e.target.id||e.target.classList.contains("modalEditSaleBtn")?(e.preventDefault(),salesTable?updateData():debtorsTable&&updateDebtor()):e.target.classList.contains("deleteSaleBtn")?(keyToUpdate=parseFloat(e.target.dataset.id),salesTable?modalToDeleteSale.children[0].textContent="Are you sure you want to delete this sale?":salesPeriodTable?modalToDeleteSale.children[0].textContent="Are you sure you want to delete this period?":debtorsTable&&(modalToDeleteSale.children[3].textContent="Are you sure you want to delete this debtor?"),displayDeleteSaleModal()):"modalDeleteSaleBtn"===e.target.id?(salesTable?0==checkboxsSelectedKeys.length?deleteSaleData():(checkboxsSelectedKeys.forEach((function(e){keyToUpdate=parseFloat(e),deleteSaleData()})),deleteSelectedSaleBtn.style.display="none",deleteAllSaleBtn.style.display="none",deselectAllSalesChecks.style="none"):debtorsTable&&(0==checkboxsSelectedKeys.length?deleteDebtorData():(checkboxsSelectedKeys.forEach((function(e){keyToUpdate=parseFloat(e),deleteDebtorData()})),deleteSelectedSaleBtn.style.display="none",deleteAllSaleBtn.style.display="none",deselectAllSalesChecks.style.display="none")),selectorOfAllSalesChecks.checked=!1,hideAddSaleModal()):"modalDeleteSaleBtn"===e.target.id&&salesPeriodTable?(0==checkboxsSelectedKeys.length?deleteSalesPeriodData():(checkboxsSelectedKeys.forEach((function(e){keyToUpdate=parseFloat(e),deleteSalesPeriodData()})),deleteSelectedSaleBtn.style.display="none",deleteAllSaleBtn.style.display="none"),selectorOfAllSalesChecks.checked=!1,hideAddSaleModal()):"closeConfirmationModal"===e.target.id?confirmationModal.classList.remove("display"):"deleteSelectedSaleBtn"===e.target.id?(salesTable?modalToDeleteSale.children[3].textContent="Are you sure you want to delete all selected sales?":salesPeriodTable&&(modalToDeleteSale.children[3].textContent="Are you sure you want to delete all selected periods?"),displayDeleteSaleModal()):"deleteAllSaleBtn"===e.target.id?(salesTable?modalToDeleteSale.children[3].textContent="Are you sure you want to delete all sales?":salesPeriodTable&&(modalToDeleteSale.children[3].textContent="Are you sure you want to delete all periods?"),displayDeleteSaleModal()):"refreshSalesChartBtn"===e.target.id?salesChart?(salesChart.parentElement.classList.remove("chart-active"),setTimeout((function(){salesChart.parentElement.classList.add("chart-active")}),1)):salesPerPeriodChart&&(salesPerPeriodChart.parentElement.classList.remove("chart-active"),setTimeout((function(){salesPerPeriodChart.parentElement.classList.add("chart-active")}),1)):"createPeriodBtn"===e.target.id||e.target.classList.contains("createPeriodBtn")?displayCreatePeriodModal():"modalCreatePeriodBtn"===e.target.id?(addSalesPeriodData(salesPeriodResponse),hideAddSaleModal()):"nextAddDebtorBtn"===e.target.id||e.target.classList.contains("nextAddDebtorBtn")?(e.preventDefault(),validateInputsDebtor1()):"modalDebtorReturnBtn"===e.target.id||e.target.classList.contains("modalDebtorReturnBtn")?(e.preventDefault(),switchNextAddDebtor1()):("modalAddSaleBtn"===e.target.id||e.target.classList.contains("modalAddSaleBtn"))&&debtorsTable?(e.preventDefault(),addDebtor()):e.target.classList.contains("td-button--display-details")&&(displayDebtorDetails(e.target),inputs__AddAmountDebtor.forEach((function(e){e.value="",e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--wrong"),e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--right")}))),e.target.classList.contains("caret-icon")?boxOp.classList.toggle("active"):boxOp.classList.remove("active")})),forms.forEach((function(e){e.addEventListener("submit",(function(t){t.preventDefault(),e.reset()}))}));var checkTableContent=function(e){allSalesDatasets.length>0?(h2SalesInf.style.display="none",h2SalesInf.previousElementSibling.style.display="none",e.parentElement.style.display="inline-table",e.parentElement.parentElement.previousElementSibling.style.display="flex",e.parentElement.parentElement.parentElement.nextElementSibling.style.display="",createPeriodBtn.parentElement.style.display="",createPeriodBtn.style.display="flex"):(h2SalesInf.style.display="block",h2SalesInf.previousElementSibling.style.display="",e.parentElement.style.display="none",e.parentElement.parentElement.previousElementSibling.style.display="none",e.parentElement.parentElement.parentElement.nextElementSibling.style.display="none",createPeriodBtn.parentElement.style.display="none")};salesNumberInput&&(salesNumberInput.addEventListener("input",(function(e){var t=new Intl.NumberFormat("en-US");/^[0-9,]+$/.test(salesNumberInput.value)||(salesNumberInput.value=salesNumberInput.value.replace(/\D/g,""));var a=salesNumberInput.value.replace(/,/g,"");a=Math.abs(a),salesNumberInput.value=t.format(a)})),salesNumberInput.addEventListener("keyup",(function(){"0"!==salesNumberInput.value?(salesNumberInput.classList.remove("active--wrong"),salesNumberInput.classList.add("active--right")):(salesNumberInput.classList.remove("active--right"),salesNumberInput.classList.add("active--wrong"))}))),debtorsNameInput&&debtorsNameInput.addEventListener("keyup",(function(){""!==debtorsNameInput.value?(debtorsNameInput.classList.remove("active--wrong"),debtorsNameInput.classList.add("active--right")):(debtorsNameInput.classList.remove("active--right"),debtorsNameInput.classList.add("active--wrong"))})),salesDateInput&&salesDateInput.addEventListener("change",(function(){""!==salesDateInput.value?(salesDateInput.classList.remove("active--wrong"),salesDateInput.classList.add("active--right")):(salesDateInput.classList.remove("active--right"),salesDateInput.classList.add("active--wrong"))})),salesSearch&&salesSearch.addEventListener("keyup",(function(){""!==salesSearch.value?salesSearch.parentElement.classList.add("active--right"):salesSearch.parentElement.classList.remove("active--right"),searchForSales()}));var searchForSales=function(){var e=0;if(salesTable){var t,a=_createForOfIteratorHelper(allSalesDatasets);try{for(a.s();!(t=a.n()).done;){var s=t.value;-1==s.dataset.dataSalesInf.indexOf(salesSearch.value)?s.style.display="none":(s.style.display="",e++)}}catch(e){a.e(e)}finally{a.f()}}else if(salesPeriodTable){var l,n=_createForOfIteratorHelper(allSalesDatasets);try{for(n.s();!(l=n.n()).done;){var d=l.value;-1==d.dataset.dataSalesPeriodInf.indexOf(salesSearch.value)?d.style.display="none":(d.style.display="",e++)}}catch(e){n.e(e)}finally{n.f()}}else if(debtorsTable){var o,r=_createForOfIteratorHelper(allSalesDatasets);try{for(r.s();!(o=r.n()).done;){var c=o.value;-1==c.dataset.dataDebtorInf.indexOf(salesSearch.value)?c.style.display="none":(c.style.display="",e++)}}catch(e){r.e(e)}finally{r.f()}}0==e?(h2SalesInf.textContent="'".concat(salesSearch.value,"' was not found"),h2SalesInf.style.display="block",salesTable?salesTable.parentElement.style.display="none":salesPeriodTable&&(salesPeriodTable.parentElement.style.display="none")):(h2SalesInf.textContent="There is no information to show yet. You can start by adding a sale",h2SalesInf.style.display="none",salesTable?salesTable.parentElement.style.display="inline-table":salesPeriodTable&&(salesPeriodTable.parentElement.style.display="inline-table"))};debtorPhoneInput&&(debtorPhoneInput.addEventListener("input",(function(e){var t=debtorPhoneInput.value.replace(/[-\(\)\s]/g,"");/^[0-9]+$/.test(debtorPhoneInput.value)||(debtorPhoneInput.value=debtorPhoneInput.value.replace(/\D/g,"")),t.length>=7?debtorPhoneInput.value="(".concat(t.substr(0,3),") ").concat(t.substr(3,3)," - ").concat(t.substr(6,4)):t.length>=4?debtorPhoneInput.value="(".concat(t.substr(0,3),") ").concat(t.substr(3,3)):debtorPhoneInput.value=t})),debtorPhoneInput.addEventListener("keyup",(function(){debtorPhoneInput.classList.remove("active--wrong"),""!==debtorPhoneInput.value?debtorPhoneInput.classList.add("active--right"):debtorPhoneInput.classList.remove("active--right")}))),debtorAddressInput&&debtorAddressInput.addEventListener("keyup",(function(){debtorAddressInput.classList.remove("active--wrong"),""!==debtorAddressInput.value?debtorAddressInput.classList.add("active--right"):debtorAddressInput.classList.remove("active--right")})),setTimeout((function(){inputs__AddAmountDebtor.forEach((function(e){var t=/^[0-9,]+$/,a=!1;e.addEventListener("input",(function(a){console.log("listo");var s=new Intl.NumberFormat("en-US");t.test(e.value)||(e.value=e.value.replace(/\D/g,""));var l=e.value.replace(/,/g,"");l=Math.abs(l),isNaN(l)||(e.value=s.format(l))})),e.addEventListener("keydown",(function(e){a="Backspace"===e.key})),e.addEventListener("keyup",(function(s){t.test(parseFloat(s.key))?(e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--wrong"),e.parentElement.classList.add("tr-details__boxTd-records--add-or-remove--right")):0==e.value&&a?(e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--wrong"),e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--right")):a&&0!==e.value?(e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--wrong"),e.parentElement.classList.add("tr-details__boxTd-records--add-or-remove--right")):e.parentElement.classList.contains("tr-details__boxTd-records--add-or-remove--wrong")||(e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--right"),e.parentElement.classList.add("tr-details__boxTd-records--add-or-remove--wrong"),setTimeout((function(){e.parentElement.classList.remove("tr-details__boxTd-records--add-or-remove--wrong")}),500))}))}))}),1e3),restrictAccess(),markLi();